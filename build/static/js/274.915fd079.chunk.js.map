{"version":3,"file":"static/js/274.915fd079.chunk.js","mappings":"yQAsGA,EA5FmB,SAACA,GAEhB,OAAoCC,EAAAA,EAAAA,UAAS,IAAG,eAAzCC,EAAU,KAAEC,EAAa,KAChC,GAA4CF,EAAAA,EAAAA,WAAS,GAAM,eAApDG,EAAc,KAAEC,EAAiB,KACxC,GAA4BJ,EAAAA,EAAAA,UAAS,KAAI,eAAlCK,EAAM,KAAEC,EAAS,KACxB,GAAsCN,EAAAA,EAAAA,WAAS,GAAM,eAA9CO,EAAW,KAAEC,EAAc,KAElC,GAAuCC,EAAAA,EAAAA,IAAkB,GAAlDC,EAAO,EAAPA,QAASC,EAAK,EAALA,MAAOC,EAAY,EAAZA,cAEvBC,EAAAA,EAAAA,YAAU,WACNC,EAAUT,GAAQ,EACtB,GAAG,IAGH,IAAMS,EAAY,SAACT,EAAQU,GACbX,GAAVW,GACAH,EAAaP,GACZW,KAAKC,EACV,EAEMA,EAAqB,SAACC,GACxB,IAAIC,GAAQ,EAETD,EAAcE,OAAS,IACtBD,GAAQ,GAERjB,GAAc,SAAAD,GAAU,wBAAQA,IAAU,OAAKiB,GAAa,IAC5Dd,GAAkB,GAClBE,GAAU,SAAAD,GAAM,OAAIA,EAAS,CAAC,IAC9BG,EAAeW,EACvB,EAUME,EAAQpB,EAAWqB,KAAI,SAACC,EAAOC,GACjC,IAAIC,EAAW,CAAC,UAAc,SAO9B,MANuB,wEAAnBF,EAAMG,YACND,EAAW,CAAC,UAAc,kBAM1B,SAACE,EAAA,EAAa,CAEVC,QAAS,IACTC,IAAE,EACFC,WAAW,oBAAmB,UAE9B,UAAC,KAAI,CACDC,GAAE,kBAAaR,EAAMS,IAErBC,SAAU,EACVC,UAAU,oBAAmB,WAC7B,gBAAKA,UAAU,mBAAkB,UAC7B,gBAAKA,UAAU,mBAAmBC,IAAKZ,EAAMG,UAAWU,IAAKb,EAAMc,MAAOC,MAAOb,OAErF,gBAAKS,UAAU,qBAAoB,SAAEX,EAAMc,SAC3C,iBAAKH,UAAU,qBAAoB,UAAEX,EAAMgB,MAAM,WAdhDhB,EAAMS,GAkBvB,IAEMQ,EAAe7B,GAAQ,SAAC8B,EAAA,EAAY,IAAK,KACzCC,EAAUhC,IAAYP,GAAiB,SAACwC,EAAA,EAAO,IAAK,KAE1D,OACI,qBAAST,UAAU,cAAa,UAC3BM,EACAE,GACD,SAACE,EAAA,EAAe,CAACC,UAAW,KAAK,UAC7B,eAAIX,UAAU,oBAAmB,SAC5Bb,OAGT,mBACIa,UAAU,gCACVI,MAAO,CAACQ,QAASvC,EAAa,OAAS,SACvCwC,SAAU5C,EACV6C,QAAS,kBAAMlC,EAAUT,EAAO,EAAC,SACpC,gBAGb,EC/EA,EAjBmB,WAEf,OAAkCL,EAAAA,EAAAA,UAAS,MAAK,eAA1BiD,GAAF,KAAU,MAK9B,OACI,iCACG,SAACC,EAAA,EAAS,KACT,oBAAShB,UAAU,SAAQ,UACzB,SAAC,EAAU,CAACiB,gBAPE,SAACnB,GACvBiB,EAASjB,EACX,QASJ,C","sources":["components/comicsList/ComicsList.js","components/pages/ComicsPage.js"],"sourcesContent":["import { useState, useEffect, useRef } from 'react'\r\nimport useMarvelServices from '../../services/MarvelServices';\r\nimport Spinner from \"../UI/Spinner\"\r\nimport ErrorMessage from '../UI/ErrorMessage'\r\nimport { Link } from 'react-router-dom';\r\n\r\n\r\nimport './ComicsList.sass'\r\nimport { CSSTransition, TransitionGroup } from 'react-transition-group';\r\n\r\nconst ComicsList = (props) => {\r\n    \r\n    const [comicsList, setComicsList] = useState([]);\r\n    const [newItemLoading, setNewItemLoading] = useState(false);\r\n    const [offset, setOffset] = useState(210);\r\n    const [comicsEnded, setComicsEnded] = useState(false);\r\n   \r\n    const {loading, error, getAllComics} = useMarvelServices(true);\r\n    \r\n    useEffect(()=> {\r\n        onRequest(offset, true)\r\n    }, [])\r\n\r\n\r\n    const onRequest = (offset, initial) => {\r\n        initial ? setNewItemLoading(false) : setNewItemLoading(true);\r\n        getAllComics(offset)\r\n        .then(onComicsListLoaded);\r\n    }\r\n\r\n    const onComicsListLoaded = (newComicsList) => {\r\n        let ended = false;\r\n\r\n        if(newComicsList.length < 8) {\r\n            ended = true;\r\n        }\r\n            setComicsList(comicsList => [...comicsList, ...newComicsList]);\r\n            setNewItemLoading(false);\r\n            setOffset(offset => offset + 8);\r\n            setComicsEnded(ended);\r\n    }\r\n\r\n    // const itemRefs = useRef([]);\r\n\r\n    // const focusOnItem = (id) => {\r\n    //     itemRefs.current.forEach(item => item.classList.remove('char-list__card_selected'));\r\n    //     itemRefs.current[id].classList.add('char-list__card_selected');\r\n    //     itemRefs.current[id].focus();\r\n    // }\r\n\r\n    const cards = comicsList.map((comic, i)=> {\r\n        let imgStyle = {'objectFit' : 'cover'}\r\n        if (comic.thumbnail ==='http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg') {\r\n            imgStyle = {'objectFit' : '—Åontain'};\r\n        }\r\n        // } else if (item.thumbnail === 'http://i.annihil.us/u/prod/marvel/i/mg/f/60/4c002e0305708.gif') {\r\n        //     imgStyle = {'objectFit' : 'contain'};\r\n        // }\r\n        return(\r\n            <CSSTransition \r\n                key={comic.id} \r\n                timeout={500} \r\n                in\r\n                classNames=\"comics-list__card\"\r\n            >\r\n                <Link\r\n                    to={`/comics/${comic.id}`}\r\n                    // ref={el => itemRefs.current[i] = el}\r\n                    tabIndex={0}\r\n                    className=\"comics-list__card\">\r\n                    <div className=\"comics-list__img\">\r\n                        <img className=\"comics-list__img\" src={comic.thumbnail} alt={comic.title} style={imgStyle} />\r\n                    </div>\r\n                    <div className=\"comics-list__title\">{comic.title}</div>\r\n                    <div className=\"comics-list__price\">{comic.price}$</div>\r\n                </Link>\r\n            </CSSTransition>\r\n        )\r\n    })\r\n\r\n    const errorMessage = error ? <ErrorMessage/> : null;\r\n    const spinner = loading && !newItemLoading ? <Spinner/> : null;\r\n\r\n    return(\r\n        <section className='comics-list'>\r\n            {errorMessage}\r\n            {spinner}\r\n            <TransitionGroup component={null}>\r\n                <ul className=\"comics-list__wrap\">\r\n                    {cards}\r\n                </ul>\r\n            </TransitionGroup>\r\n            <button \r\n                className=\"btn btn_red btn_long btn_main\"\r\n                style={{display: comicsEnded? 'none' : 'block'}}\r\n                disabled={newItemLoading}\r\n                onClick={() => onRequest(offset)} \r\n            >LOAD MORE</button>\r\n        </section>\r\n    )\r\n}\r\n\r\nexport default ComicsList;","import { useState } from 'react';\r\nimport AppBanner from '../appBanner/AppBanner';\r\nimport ComicsList from '../comicsList/ComicsList';\r\n\r\nconst ComicsPage = () => {\r\n\r\n    const [selectedComic, setComic] = useState(null);\r\n\r\n    const onComicSelected = (id) => {\r\n      setComic(id)\r\n    }\r\n    return (\r\n        <>\r\n           <AppBanner/>\r\n            <section className=\"comics\">\r\n              <ComicsList onComicSelected={onComicSelected}/>\r\n            </section> \r\n        </>\r\n    );\r\n};\r\n\r\nexport default ComicsPage;"],"names":["props","useState","comicsList","setComicsList","newItemLoading","setNewItemLoading","offset","setOffset","comicsEnded","setComicsEnded","useMarvelServices","loading","error","getAllComics","useEffect","onRequest","initial","then","onComicsListLoaded","newComicsList","ended","length","cards","map","comic","i","imgStyle","thumbnail","CSSTransition","timeout","in","classNames","to","id","tabIndex","className","src","alt","title","style","price","errorMessage","ErrorMessage","spinner","Spinner","TransitionGroup","component","display","disabled","onClick","setComic","AppBanner","onComicSelected"],"sourceRoot":""}