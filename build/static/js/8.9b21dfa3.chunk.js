"use strict";(self.webpackChunkmarvel_db=self.webpackChunkmarvel_db||[]).push([[8],{8:function(e,a,r){r.r(a),r.d(a,{default:function(){return k}});var n=r(439),s=r(791),c=r(159),t=r(200),i=r(290),l=r(184),o=function(e){var a=e.char,r=a.name,n=a.description,s=a.thumbnail,c=a.homepage,t=a.wiki,i={objectFit:"cover"};return"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===s&&(i={objectFit:"contain"}),(0,l.jsxs)("div",{className:"random-char__about",children:[(0,l.jsx)("div",{className:"random-char__img",children:(0,l.jsx)("img",{src:s,alt:r,style:i})}),(0,l.jsxs)("div",{className:"random-char__info",children:[(0,l.jsx)("div",{className:"random-char__name",children:r}),(0,l.jsx)("p",{className:"random-char__descr",children:n}),(0,l.jsxs)("div",{className:"random-char__btns",children:[(0,l.jsx)("a",{href:c,className:"btn btn_red",rel:"noreferrer",target:"_blank",children:"HOMEPAGE"}),(0,l.jsx)("a",{href:t,className:"btn btn_gray",rel:"noreferrer",target:"_blank",children:"WIKI"})]})]})]})},d=function(){var e=(0,s.useState)({}),a=(0,n.Z)(e,2),r=a[0],d=a[1],h=(0,c.Z)(),u=h.error,m=h.getCharacter,_=h.loading,j=h.clearError;(0,s.useEffect)((function(){x()}),[]);var f=function(e){d(e)},x=function(){j();var e=Math.floor(400*Math.random()+1011e3);m(e).then(f)},v=u?(0,l.jsx)(i.Z,{}):null,b=_?(0,l.jsx)(t.Z,{}):null,p=_||u?null:(0,l.jsx)(o,{char:r});return(0,l.jsxs)("section",{className:"random-char",children:[v,b,p,(0,l.jsxs)("div",{className:"random-char__new",children:[(0,l.jsxs)("p",{className:"random-char__text",children:["Random character for today! Do you want to get to know him better?",(0,l.jsx)("br",{})," ",(0,l.jsx)("br",{}),"Or choose another one"]}),(0,l.jsx)("button",{onClick:x,className:"btn btn_red btn_dark-bg",children:"TRY IT"})]})]})},h=r(433);var u=function(e){var a=(0,s.useState)([]),r=(0,n.Z)(a,2),o=r[0],d=r[1],u=(0,s.useState)(!1),m=(0,n.Z)(u,2),_=m[0],j=m[1],f=(0,s.useState)(210),x=(0,n.Z)(f,2),v=x[0],b=x[1],p=(0,s.useState)(!1),N=(0,n.Z)(p,2),g=N[0],k=N[1],Z=(0,c.Z)(),y=Z.loading,E=Z.error,w=Z.getAllCharacters;(0,s.useEffect)((function(){C(v,!0)}),[]);var C=function(e,a){j(!a),w(e).then(F)},F=function(e){var a=!1;e.length<9&&(a=!0),d((function(a){return[].concat((0,h.Z)(a),(0,h.Z)(e))})),j(!1),b((function(e){return e+9})),k(a)},I=(0,s.useRef)([]),S=function(e){I.current.forEach((function(e){return e.classList.remove("char-list__card_selected")})),I.current[e].classList.add("char-list__card_selected"),I.current[e].focus()},T=function(a){var r=a.map((function(a,r){var n={objectFit:"cover"};return"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===a.thumbnail?n={objectFit:"unset"}:"http://i.annihil.us/u/prod/marvel/i/mg/f/60/4c002e0305708.gif"===a.thumbnail&&(n={objectFit:"contain"}),(0,l.jsxs)("li",{className:"char-list__card",ref:function(e){return I.current[r]=e},tabIndex:0,onKeyDown:function(n){" "!==n.key&&"Enter"!==n.key||(n.preventDefault(),e.onCharSelected(a.id),S(r))},onClick:function(){e.onCharSelected(a.id),S(r)},children:[(0,l.jsx)("div",{className:"char-list__img",children:(0,l.jsx)("img",{src:a.thumbnail,alt:a.name,style:n})}),(0,l.jsx)("div",{className:"char-list__name",children:a.name})]},a.id)}));return(0,l.jsx)("ul",{className:"char-list__wrap",children:r})}(o),O=E?(0,l.jsx)(i.Z,{}):null,A=y&&!_?(0,l.jsx)(t.Z,{}):null;return console.log("Render"),(0,l.jsxs)("section",{className:"char-list bg-decoration",children:[O,A,T,(0,l.jsx)("button",{className:"btn btn_red btn_long btn_main",style:{display:g?"none":"block"},disabled:_,onClick:function(){return C(v)},children:"LOAD MORE"})]})},m=r(671),_=r(466),j=r(136),f=r(516),x=function(e){(0,j.Z)(r,e);var a=(0,f.Z)(r);function r(){var e;(0,m.Z)(this,r);for(var n=arguments.length,s=new Array(n),c=0;c<n;c++)s[c]=arguments[c];return(e=a.call.apply(a,[this].concat(s))).state={error:!1},e.componentDidCatch=function(a,r){e.setState({error:!0}),console.log(a,r)},e}return(0,_.Z)(r,[{key:"render",value:function(){return this.state.error?(0,l.jsx)(i.Z,{}):this.props.children}}]),r}(s.Component),v=r(87);function b(){return(0,l.jsxs)("nav",{className:"skeleton",children:[(0,l.jsx)("h2",{className:"skeleton__title",children:"Please select a character to see information"}),(0,l.jsxs)("div",{className:"skeleton__wrap pulse",children:[(0,l.jsx)("div",{className:"skeleton__cyrcle"}),(0,l.jsx)("div",{className:"skeleton__line"}),(0,l.jsx)("div",{className:"skeleton__line"}),(0,l.jsx)("div",{className:"skeleton__line"})]})]})}var p=function(e){var a=e.char,r=a.name,n=a.description,s=a.thumbnail,c=a.homepage,t=a.wiki,i=a.comics,o={objectFit:"cover"};return"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"!==s&&"http://i.annihil.us/u/prod/marvel/i/mg/f/60/4c002e0305708.gif"!==s||(o={objectFit:"contain"}),(0,l.jsxs)(l.Fragment,{children:[(0,l.jsxs)("div",{className:"char-side-panel__wrap",children:[(0,l.jsx)("div",{className:"char-side-panel__img",children:(0,l.jsx)("img",{src:s,alt:r,style:o})}),(0,l.jsxs)("div",{className:"char-side-panel__info",children:[(0,l.jsx)("div",{className:"random-char__name",children:r}),(0,l.jsxs)("div",{className:"char-side-panel__btns",children:[(0,l.jsx)("a",{href:c,rel:"noreferrer",target:"_blank",className:"btn btn_red",children:"HOMEPAGE"}),(0,l.jsx)("a",{href:t,rel:"noreferrer",target:"_blank",className:"btn btn_gray",children:"WIKI"})]})]})]}),(0,l.jsx)("p",{className:"random-char__descr char-side-panel__descr",children:n}),(0,l.jsx)("div",{className:"char-side-panel__comics-title",children:"Comics:"}),(0,l.jsxs)("ul",{className:"char-side-panel__comics-list",children:[i.length>0?null:"There is no comics with this character",i.map((function(e,a){if(!(a>9))return(0,l.jsx)("li",{className:"char-side-panel__comics-item",children:(0,l.jsx)(v.rU,{to:"comics/".concat(e.resourceURI.substr(43)),className:"char-side__link",children:e.name})},a)}))]})]})},N=function(e){var a=(0,s.useState)(null),r=(0,n.Z)(a,2),o=r[0],d=r[1],h=(0,c.Z)(),u=h.error,m=h.getCharacter,_=h.loading,j=h.clearError;(0,s.useEffect)((function(){f()}),[e.charId]),(0,s.useEffect)((function(){f()}),[]);var f=function(){var a=e.charId;a&&(j(),m(a).then(x))},x=function(e){d(e)},v=o||_||u?null:(0,l.jsx)(b,{}),N=u?(0,l.jsx)(i.Z,{}):null,g=_?(0,l.jsx)(t.Z,{}):null,k=_||u||!o?null:(0,l.jsx)(p,{char:o});return(0,l.jsxs)("section",{className:"char-side-panel",children:[v,N,g,k]})};function g(e){var a=e.modalType;return(0,l.jsxs)("div",{className:"modal",children:[(0,l.jsx)("div",{className:"modal__title",children:"Or find a character by name:"}),(0,l.jsxs)("form",{className:"modal__form",children:[(0,l.jsx)("input",{id:"search",name:"search",type:"text",placeholder:"Enter name"}),(0,l.jsx)("button",{className:"btn btn_red",children:"FIND"})]}),function(){switch(a){case"validationError":return(0,l.jsx)("h3",{className:"modal__error",children:"This field is required"});case"charFounded":return(0,l.jsxs)("div",{className:"modal__success",children:[(0,l.jsx)("h3",{className:"modal__success-text",children:"There is! Visit page?"}),(0,l.jsx)("button",{className:"btn btn_gray",children:"TO PAGE"})]});case"charNotFounded":return(0,l.jsx)("h3",{className:"modal__error",children:"The character was not found. Check the name and try again"});default:return null}}()]})}var k=function(){var e=(0,s.useState)(null),a=(0,n.Z)(e,2),r=a[0],c=a[1];return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(d,{}),(0,l.jsxs)("section",{className:"main",children:[(0,l.jsx)(u,{onCharSelected:function(e){c(e)}}),(0,l.jsxs)("div",{children:[(0,l.jsx)(x,{children:(0,l.jsx)(N,{charId:r})}),(0,l.jsx)(g,{modalType:"validationError"})]})]})]})}}}]);
//# sourceMappingURL=8.9b21dfa3.chunk.js.map